<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CryptoAuthLib: Python CryptoAuthLib module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="microchip.png"/></td>
  <td id="projectalign">
   <div id="projectname">CryptoAuthLib<span id="projectnumber">&#160;v3.7.3</span>
   </div>
   <div id="projectbrief">Microchip CryptoAuthentication Library</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('a02801.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Python CryptoAuthLib module </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md25"></a>
Introduction</h1>
<p>This module provides a thin python ctypes layer to evaluate the cryptoauthlib interface to Microchip CryptoAuthentication devices.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Code Examples</h2>
<p>Code examples for python are available on github as part of <a href="https://github.com/MicrochipTech/cryptoauthtools">CryptoAuthTools</a> under the <a href="https://github.com/MicrochipTech/cryptoauthtools/tree/master/python/examples">python/examples</a> directory</p>
<h1><a class="anchor" id="autotoc_md27"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md28"></a>
CryptoAuthLib python module can be installed through Python's pip tool:</h2>
<div class="fragment"><div class="line">pip install cryptoauthlib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
To upgrade your installation when new releases are made:</h2>
<div class="fragment"><div class="line">pip install -U cryptoauthlib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30"></a>
If you ever need to remove your installation:</h2>
<div class="fragment"><div class="line">pip uninstall cryptoauthlib</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md31"></a>
What does python CryptoAuthLib package do?</h1>
<p>CryptoAuthLib module gives access to most functions available as part of standard cryptoauthlib (which is written in 'C'). These python functions for the most part are very similar to 'C' functions. The module in short acts as a wrapper over the 'C' cryptoauth library functions.</p>
<p>Microchip cryptoauthlib product page: <a href="http://www.microchip.com/SWLibraryWeb/product.aspx?product=CryptoAuthLib">Link</a></p>
<h1><a class="anchor" id="autotoc_md32"></a>
Supported hardware</h1>
<ul>
<li><a href="http://www.microchip.com/DevelopmentTools/ProductDetails/AT88CK101SK-MAH-XPRO">AT88CK101</a></li>
<li><a href="https://www.microchip.com/developmenttools/ProductDetails/DM320109">CryptoAuthentication SOIC XPRO Starter Kit (DM320109)</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
Supported devices</h1>
<p>The family of devices supported currently are:</p>
<ul>
<li><a href="http://www.microchip.com/ATSHA204A">ATSHA204A</a></li>
<li><a href="http://www.microchip.com/ATECC108A">ATECC108A</a></li>
<li><a href="http://www.microchip.com/ATECC508A">ATECC508A</a></li>
<li><a href="http://www.microchip.com/ATECC608A">ATECC608A</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md34"></a>
Using cryptoauthlib python module</h1>
<p>The following is a 'C' code made using cryptoauthlib 'C' library.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="a00512.html">cryptoauthlib.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> main()</div>
<div class="line">{</div>
<div class="line">    ATCA_STATUS status;</div>
<div class="line">    uint8_t revision[4];</div>
<div class="line">    uint8_t randomnum[32];</div>
<div class="line"> </div>
<div class="line">    status = <a class="code hl_function" href="a01403.html#gacdc4fa3d2f2f6d197af8c10ab1f288b8">atcab_init</a>(cfg_ateccx08a_kitcdc_default);</div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="a00269.html#ab132d69c7f94de708ffef02b6dc69d27">ATCA_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error&quot;</span>);</div>
<div class="line">        exit();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    status = <a class="code hl_function" href="a01403.html#ga6e19ecd60be4c74665d9ec142e460771">atcab_info</a>(revision);</div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="a00269.html#ab132d69c7f94de708ffef02b6dc69d27">ATCA_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error&quot;</span>);</div>
<div class="line">        exit();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    status = <a class="code hl_function" href="a01403.html#ga4fa442396dfbb89e59dfca837b565cec">atcab_random</a>(randomnum);</div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code hl_define" href="a00269.html#ab132d69c7f94de708ffef02b6dc69d27">ATCA_SUCCESS</a>)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error&quot;</span>);</div>
<div class="line">        exit();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aa00269_html_ab132d69c7f94de708ffef02b6dc69d27"><div class="ttname"><a href="a00269.html#ab132d69c7f94de708ffef02b6dc69d27">ATCA_SUCCESS</a></div><div class="ttdeci">#define ATCA_SUCCESS</div><div class="ttdef"><b>Definition:</b> atca_status.h:44</div></div>
<div class="ttc" id="aa00512_html"><div class="ttname"><a href="a00512.html">cryptoauthlib.h</a></div><div class="ttdoc">Single aggregation point for all CryptoAuthLib header files.</div></div>
<div class="ttc" id="aa01403_html_ga4fa442396dfbb89e59dfca837b565cec"><div class="ttname"><a href="a01403.html#ga4fa442396dfbb89e59dfca837b565cec">atcab_random</a></div><div class="ttdeci">ATCA_STATUS atcab_random(uint8_t *rand_out)</div><div class="ttdoc">Executes Random command, which generates a 32 byte random number from the device.</div><div class="ttdef"><b>Definition:</b> atca_basic.c:2453</div></div>
<div class="ttc" id="aa01403_html_ga6e19ecd60be4c74665d9ec142e460771"><div class="ttname"><a href="a01403.html#ga6e19ecd60be4c74665d9ec142e460771">atcab_info</a></div><div class="ttdeci">ATCA_STATUS atcab_info(uint8_t *revision)</div><div class="ttdoc">Use the Info command to get the device revision (DevRev).</div><div class="ttdef"><b>Definition:</b> atca_basic.c:1693</div></div>
<div class="ttc" id="aa01403_html_gacdc4fa3d2f2f6d197af8c10ab1f288b8"><div class="ttname"><a href="a01403.html#gacdc4fa3d2f2f6d197af8c10ab1f288b8">atcab_init</a></div><div class="ttdeci">ATCA_STATUS atcab_init(ATCAIfaceCfg *cfg)</div><div class="ttdoc">Creates a global ATCADevice object used by Basic API.</div><div class="ttdef"><b>Definition:</b> atca_basic.c:133</div></div>
</div><!-- fragment --><p>The same code in python would be:</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> cryptoauthlib <span class="keyword">import</span> *</div>
<div class="line"> </div>
<div class="line">ATCA_SUCCESS = 0x00</div>
<div class="line">revision = bytearray(4)</div>
<div class="line">randomnum = bytearray(32)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Locate and load the compiled library</span></div>
<div class="line">load_cryptoauthlib()</div>
<div class="line"> </div>
<div class="line"><span class="keyword">assert</span> ATCA_SUCCESS == atcab_init(cfg_ateccx08a_kithid_default())</div>
<div class="line"> </div>
<div class="line"><span class="keyword">assert</span> ATCA_SUCCESS == <a class="code hl_function" href="a01403.html#ga6e19ecd60be4c74665d9ec142e460771">atcab_info</a>(revision)</div>
<div class="line">print(<span class="stringliteral">&#39;&#39;</span>.join([<span class="stringliteral">&#39;%02X &#39;</span> % x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> revision]))</div>
<div class="line"> </div>
<div class="line"><span class="keyword">assert</span> ATCA_SUCCESS == <a class="code hl_function" href="a01403.html#ga4fa442396dfbb89e59dfca837b565cec">atcab_random</a>(randomnum)</div>
<div class="line">print(<span class="stringliteral">&#39;&#39;</span>.join([<span class="stringliteral">&#39;%02X &#39;</span> % x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> randomnum]))</div>
</div><!-- fragment --><p>In the above python code, "import cryptoauthlib" imports the python module. load_cryptoauthlib() function loads the compiled library. The load_cryptoauthlib() is a function that you will not see in the 'C' library, this is a python specific utility function and is required for python scripts to locate and load the compiled library.</p>
<h1><a class="anchor" id="autotoc_md35"></a>
In Summary</h1>
<h2><a class="anchor" id="autotoc_md36"></a>
Step I: Import the module</h2>
<div class="fragment"><div class="line">from cryptoauthlib import *</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md37"></a>
Step II: Initilize the module</h2>
<div class="fragment"><div class="line">load_cryptoauthlib()</div>
<div class="line"> </div>
<div class="line">assert ATCA_SUCCESS == atcab_init(cfg_ateccx08a_kithid_default())</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md38"></a>
Step III: Use Cryptoauthlib APIs</h2>
<p>Call library APIs of your choice</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Code portability</h1>
<p>Microchip's CryptoAuthentication products can now be evaluated with the power and flexibility of python. Once the evaluation stage is done the python code can be ported to 'C' code.</p>
<p>As seen above the python API maintains a 1 to 1 equivalence to the 'C' API in order to easy the transition between the two.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Cryptoauthlib module API documentation</h1>
<h2><a class="anchor" id="autotoc_md41"></a>
help() command</h2>
<p>All of the python function's documentation can be viewed through python's built in help() function.</p>
<p>For example, to get the documentation of <a class="el" href="a01403.html#ga6e19ecd60be4c74665d9ec142e460771" title="Use the Info command to get the device revision (DevRev).">atcab_info()</a> function:</p>
<div class="fragment"><div class="line">&gt;&gt;&gt; help(cryptoauthlib.atcab_info)</div>
<div class="line">Help on function atcab_info in module cryptoauthlib.atcab:</div>
<div class="line"> </div>
<div class="line">atcab_info(revision)</div>
<div class="line">Used to get the device revision number. (DevRev)</div>
<div class="line"> </div>
<div class="line">Args:</div>
<div class="line">    revision            4-byte bytearray receiving the revision number</div>
<div class="line">                        from the device. (Expects bytearray)</div>
<div class="line"> </div>
<div class="line">Returns:</div>
<div class="line">    Status code</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md42"></a>
dir() command</h2>
<p>The dir command without arguments, return the list of names in the current local scope. With an argument, attempt to return a list of valid attributes for that object. For example dir(cryptoauthlib) will return all the methods available in the cryptoauthlib module.</p>
<h1><a class="anchor" id="autotoc_md43"></a>
Code Examples</h1>
<p>Code examples for python are available on github as part of <a href="https://github.com/MicrochipTech/cryptoauthtools/tree/master/python/examples">CryptoAuthTools</a> under the python/examples directory</p>
<h1><a class="anchor" id="autotoc_md44"></a>
Tests</h1>
<p>Module tests can be located in the <a href="https://github.com/MicrochipTech/cryptoauthlib/tree/master/python/tests">python/tests</a> of the main cryptoauthlib repository. The <a href="https://github.com/MicrochipTech/cryptoauthlib/tree/master/python/tests/README.md">README.md</a> has details for how to run the tests. The module tests are not comprehensive for the entire functionality of cryptoauthlib but rather are meant to test the python module code only against the library to ensure the interfaces are correct and ctypes structures match the platform.</p>
<h1><a class="anchor" id="autotoc_md45"></a>
Release notes</h1>
<p>See Release Notes </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
